<!-- HTML header for doxygen 1.9.1-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-SY496B9L99"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-SY496B9L99');
</script>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.12.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>MFC: Performance</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js", "TeX/AMSmath.js", "TeX/AMSsymbols.js"],
  jax: ["input/TeX","output/HTML-CSS"],
});
// This file is set as MATHJAX_CODEFILE in the Doxyfile. It configures how
// MathJax renders expressions in Markdown so that it is consistent with GitHub.
MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX", "output/HTML-CSS"],
    tex2jax: {
      inlineMath:  [ ['$',  '$'], ["\\(","\\)"] ],
      displayMath: [ ['$$','$$'], ["\\[","\\]"] ],
      processEscapes: true,
      ignoreClass: "line" // Ignore code blocks: https://web.archive.org/web/20120430100225/http://www.mathjax.org/docs/1.1/options/tex2jax.html
    },
    "HTML-CSS": {
      fonts: ["TeX"]
    }
});
</script>
<script type="text/javascript" async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link rel="shortcut icon" href="icon.ico" type="image/x-icon" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="icon.ico"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">MFC
   </div>
   <div id="projectbrief">High-fidelity multiphase flow simulation</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.12.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('md_expectedPerformance.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Performance</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="autotoc_md62"></a></p>
<p>MFC has been benchmarked on several CPUs and GPU devices. This page shows a summary of these results.</p>
<h1><a class="anchor" id="autotoc_md63"></a>
Figure of merit: Grind time performance</h1>
<p>The following table outlines observed performance as nanoseconds per grid point (ns/GP) per equation (eq) per right-hand side (rhs) evaluation (lower is better), also known as the grind time. We solve an example 3D, inviscid, 5-equation model problem with two advected species (8 PDEs) and 8M grid points (158-cubed uniform grid). The numerics are WENO5 finite volume reconstruction and HLLC approximate Riemann solver. This case is located in <code>examples/3D_performance_test</code>.</p>
<p>Results are for MFC v4.9.3 (July 2024 release), though numbers have not changed meaningfully since then. All results are for the compiler that gave the best performance. Note:</p><ul>
<li>CPU results may be performed on CPUs with more cores than reported in the table; we report results for the best performance given the full processor die by checking the performance for different core counts on that device. These are reported as (X/Y cores), where X is the used cores, and Y is the total on the die.</li>
<li>GPU results on single-precision (SP) GPUs performed computation in double-precision via conversion in compiler/software; these numbers are <em>not</em> for single-precision computation. AMD MI250X GPUs have two graphics compute dies (GCDs) per MI250X device; we report results for one GCD, though one can quickly estimate full MI250X runtime by halving the single GCD grind time number.</li>
</ul>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadRight">Hardware   </th><th class="markdownTableHeadRight"></th><th class="markdownTableHeadRight">Grind Time   </th><th class="markdownTableHeadLeft">Compiler   </th><th class="markdownTableHeadLeft">Computer    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyRight">NVIDIA GH200 (GPU only)   </td><td class="markdownTableBodyRight">1 GPU   </td><td class="markdownTableBodyRight">0.32   </td><td class="markdownTableBodyLeft">NVHPC 24.1   </td><td class="markdownTableBodyLeft">GT Rogues Gallery    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyRight">NVIDIA H100   </td><td class="markdownTableBodyRight">1 GPU   </td><td class="markdownTableBodyRight">0.45   </td><td class="markdownTableBodyLeft">NVHPC 24.5   </td><td class="markdownTableBodyLeft">GT Rogues Gallery    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyRight">NVIDIA A100   </td><td class="markdownTableBodyRight">1 GPU   </td><td class="markdownTableBodyRight">0.62   </td><td class="markdownTableBodyLeft">NVHPC 22.11   </td><td class="markdownTableBodyLeft">GT Phoenix    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyRight">NVIDIA V100   </td><td class="markdownTableBodyRight">1 GPU   </td><td class="markdownTableBodyRight">0.99   </td><td class="markdownTableBodyLeft">NVHPC 22.11   </td><td class="markdownTableBodyLeft">GT Phoenix    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyRight">NVIDIA A30   </td><td class="markdownTableBodyRight">1 GPU   </td><td class="markdownTableBodyRight">1.06   </td><td class="markdownTableBodyLeft">NVHPC 24.1   </td><td class="markdownTableBodyLeft">GT Rogues Gallery    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyRight">AMD MI250X   </td><td class="markdownTableBodyRight">1 <b>GCD</b>   </td><td class="markdownTableBodyRight">1.09   </td><td class="markdownTableBodyLeft">CCE 16.0.1   </td><td class="markdownTableBodyLeft">OLCF Frontier    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyRight">AMD MI100   </td><td class="markdownTableBodyRight">1 GPU   </td><td class="markdownTableBodyRight">1.38   </td><td class="markdownTableBodyLeft">CCE 16.0.1   </td><td class="markdownTableBodyLeft">Cray internal system    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyRight">NVIDIA P100   </td><td class="markdownTableBodyRight">1 GPU   </td><td class="markdownTableBodyRight">2.35   </td><td class="markdownTableBodyLeft">NVHPC 23.5   </td><td class="markdownTableBodyLeft">GT CSE Internal    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyRight">NVIDIA A40 (SP GPU)   </td><td class="markdownTableBodyRight">1 GPU   </td><td class="markdownTableBodyRight">3.3   </td><td class="markdownTableBodyLeft">NVHPC 22.11   </td><td class="markdownTableBodyLeft">NCSA Delta    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyRight">NVIDIA RTX6000 (SP GPU)   </td><td class="markdownTableBodyRight">1 GPU   </td><td class="markdownTableBodyRight">3.9   </td><td class="markdownTableBodyLeft">NVHPC 22.11   </td><td class="markdownTableBodyLeft">GT Phoenix    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyRight">Apple M1 Max   </td><td class="markdownTableBodyRight">8/10 cores   </td><td class="markdownTableBodyRight">72   </td><td class="markdownTableBodyLeft">GNU 14.1.0   </td><td class="markdownTableBodyLeft">N/A    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyRight">AMD EPYC 9534 (Genoa)   </td><td class="markdownTableBodyRight">64/64 cores   </td><td class="markdownTableBodyRight">96   </td><td class="markdownTableBodyLeft">GNU 12.3.0   </td><td class="markdownTableBodyLeft">GT Phoenix    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyRight">AMD EPYC 7763 (Milan)   </td><td class="markdownTableBodyRight">24/64 cores   </td><td class="markdownTableBodyRight">108   </td><td class="markdownTableBodyLeft">GNU 11.4.0   </td><td class="markdownTableBodyLeft">NCSA Delta    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyRight">Intel Xeon Platinum 8462Y+ (Sapphire Rapids)   </td><td class="markdownTableBodyRight">16/32 cores   </td><td class="markdownTableBodyRight">110   </td><td class="markdownTableBodyLeft">GNU 12.3.0   </td><td class="markdownTableBodyLeft">GT ICE    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyRight">Intel Xeon Gold 6454S (Sapphire Rapids)   </td><td class="markdownTableBodyRight">16/32 cores   </td><td class="markdownTableBodyRight">111   </td><td class="markdownTableBodyLeft">NVHPC 24.5   </td><td class="markdownTableBodyLeft">GT Rogues Gallery    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyRight">NVIDIA Grace CPU (Arm, Neoverse V2)   </td><td class="markdownTableBodyRight">18/72 cores   </td><td class="markdownTableBodyRight">116   </td><td class="markdownTableBodyLeft">NVHPC 24.1   </td><td class="markdownTableBodyLeft">GT Rogues Gallery    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyRight">AMD EPYC 7452 (Rome)   </td><td class="markdownTableBodyRight">16/32 cores   </td><td class="markdownTableBodyRight">126   </td><td class="markdownTableBodyLeft">GNU 12.3.0   </td><td class="markdownTableBodyLeft">GT ICE    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyRight">Intel Xeon Platinum 8352Y (Ice Lake)   </td><td class="markdownTableBodyRight">12/32 cores   </td><td class="markdownTableBodyRight">128   </td><td class="markdownTableBodyLeft">NVHPC 24.5   </td><td class="markdownTableBodyLeft">GT Rogues Gallery    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyRight">AMD EPYC 7713 (Milan)   </td><td class="markdownTableBodyRight">32/64 cores   </td><td class="markdownTableBodyRight">137   </td><td class="markdownTableBodyLeft">GNU 12.1.0   </td><td class="markdownTableBodyLeft">GT Phoenix    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyRight">Intel Xeon Gold 6226 (Cascade Lake)   </td><td class="markdownTableBodyRight">12/12 cores   </td><td class="markdownTableBodyRight">152   </td><td class="markdownTableBodyLeft">Intel oneAPI 2022.1   </td><td class="markdownTableBodyLeft">GT Phoenix    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyRight">Ampere Altra Max (Arm, Neoverse-N1)   </td><td class="markdownTableBodyRight">8/80 cores   </td><td class="markdownTableBodyRight">183   </td><td class="markdownTableBodyLeft">GNU 12.2.0   </td><td class="markdownTableBodyLeft">OLCF Wombat    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyRight">Intel Xeon E5-2650V4 (Broadwell)   </td><td class="markdownTableBodyRight">8/12 cores   </td><td class="markdownTableBodyRight">230   </td><td class="markdownTableBodyLeft">NVHPC 23.5   </td><td class="markdownTableBodyLeft">GT CSE Internal   </td></tr>
</table>
<p><b>All grind times are in nanoseconds (ns) per grid point (gp) per equation (eq) per right-hand side (rhs) evaluation, so X ns/gp/eq/rhs. Lower is better.</b></p>
<h1><a class="anchor" id="autotoc_md64"></a>
Weak scaling</h1>
<p>Weak scaling results are obtained by increasing the problem size with the number of processes so that work per process remains constant.</p>
<h2><a class="anchor" id="autotoc_md65"></a>
AMD MI250X GPU</h2>
<p>MFC weask scales to (at least) 65,536 AMD MI250X GPUs on OLCF Frontier with 96% efficiency. This corresponds to 87% of the entire machine.</p>
<p><img src="../res/weakScaling/frontier.svg" alt="" style="pointer-events: none; height: 50%; width:50%; border-radius: 10pt" class="inline"/></p>
<h2><a class="anchor" id="autotoc_md66"></a>
NVIDIA V100 GPU</h2>
<p>MFC weak scales to (at least) 13,824 V100 NVIDIA V100 GPUs on OLCF Summit with 97% efficiency. This corresponds to 50% of the entire machine.</p>
<p><img src="../res/weakScaling/summit.svg" alt="" style="pointer-events: none; height: 50%; width:50%; border-radius: 10pt" class="inline"/></p>
<h2><a class="anchor" id="autotoc_md67"></a>
IBM Power9 CPU</h2>
<p>MFC Weak scales to 13,824 Power9 CPU cores on OLCF Summit to within 1% of ideal scaling.</p>
<p><img src="../res/weakScaling/cpuScaling.svg" alt="" style="pointer-events: none; height: 50%; width:50%; border-radius: 10pt" class="inline"/></p>
<h1><a class="anchor" id="autotoc_md68"></a>
Strong scaling</h1>
<p>Strong scaling results are obtained by keeping the problem size constant and increasing the number of processes so that work per process decreases.</p>
<h2><a class="anchor" id="autotoc_md69"></a>
NVIDIA V100 GPU</h2>
<p>For these tests, the base case utilizes 8 GPUs with one MPI process per GPU. The performance is analyzed at two different problem sizes of 16M and 64M grid points, with the base case using 2M and 8M grid points per process.</p>
<h3><a class="anchor" id="autotoc_md70"></a>
16M Grid Points</h3>
<p><img src="../res/strongScaling/strongScaling16.svg" alt="" style="pointer-events: none; width: 50%; border-radius: 10pt" class="inline"/></p>
<h3><a class="anchor" id="autotoc_md71"></a>
64M Grid Points</h3>
<p><img src="../res/strongScaling/strongScaling64.svg" alt="" style="pointer-events: none; width: 50%; border-radius: 10pt" class="inline"/></p>
<h2><a class="anchor" id="autotoc_md72"></a>
IBM Power9 CPU</h2>
<p>CPU strong scaling tests are done with problem sizes of 16, 32, and 64M grid points, with the base case using 2, 4, and 8M cells per process.</p>
<p><img src="../res/strongScaling/cpuStrongScaling.svg" alt="" style="pointer-events: none; width: 50%; border-radius: 10pt" class="inline"/> </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.9.1-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.12.0 </li>
  </ul>
</div>
</body>
</html>
