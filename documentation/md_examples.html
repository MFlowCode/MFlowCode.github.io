<!-- HTML header for doxygen 1.9.1-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-SY496B9L99"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-SY496B9L99');
</script>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.13.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>MFC: Example Cases</title>
<meta name=”keywords” content="exascale, fluid dynamics, cfd, computational fluid dynamics, compressible, hpc, bryngelson, colonius, subgrid, multiphase, frontier, summit, el capitan, aurora, amd gpu, gpu, nvidia"/>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js", "TeX/AMSmath.js", "TeX/AMSsymbols.js"],
  jax: ["input/TeX","output/HTML-CSS"],
});
// This file is set as MATHJAX_CODEFILE in the Doxyfile. It configures how
// MathJax renders expressions in Markdown so that it is consistent with GitHub.
MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX", "output/HTML-CSS"],
    tex2jax: {
      inlineMath:  [ ['$',  '$'], ["\\(","\\)"] ],
      displayMath: [ ['$$','$$'], ["\\[","\\]"] ],
      processEscapes: true,
      ignoreClass: "line" // Ignore code blocks: https://web.archive.org/web/20120430100225/http://www.mathjax.org/docs/1.1/options/tex2jax.html
    },
    "HTML-CSS": {
      fonts: ["TeX"]
    }
});
</script>
<script type="text/javascript" async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link rel="shortcut icon" href="icon.ico" type="image/x-icon" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="icon.ico"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">MFC
   </div>
   <div id="projectbrief">High-fidelity multiphase flow simulation</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.13.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('md_examples.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Example Cases</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="autotoc_md31"></a></p>
<h1><a class="anchor" id="autotoc_md32"></a>
2D Riemann Test (2D)</h1>
<p>Reference: Chamarthi, A., &amp; Hoffmann, N., &amp; Nishikawa, H., &amp; Frankel S. (2023). Implicit gradients based conservative numerical scheme for compressible flows. arXiv:2110.05461</p>
<h2><a class="anchor" id="autotoc_md33"></a>
Density Initial Condition</h2>
<div class="image">
<img src="alpha_rho1_initial-2D_riemann_test-example.png" alt=""/>
<div class="caption">
Density</div></div>
    <h2><a class="anchor" id="autotoc_md34"></a>
Density Final Condition</h2>
<div class="image">
<img src="alpha_rho1_final-2D_riemann_test-example.png" alt=""/>
<div class="caption">
Density Norms</div></div>
    <h1><a class="anchor" id="autotoc_md35"></a>
Shock Droplet (2D)</h1>
<p>Reference: Panchal et. al., A Seven-Equation Diffused Interface Method for Resolved Multiphase Flows, JCP, 475 (2023)</p>
<h2><a class="anchor" id="autotoc_md36"></a>
Initial Condition</h2>
<div class="image">
<img src="initial-2D_shockdroplet-example.png" alt=""/>
<div class="caption">
Initial Condition</div></div>
    <h2><a class="anchor" id="autotoc_md37"></a>
Result</h2>
<p><img src="result-2D_shockdroplet-example.png" alt="" class="inline" title="Result"/>    </p>
<h1><a class="anchor" id="autotoc_md38"></a>
Perfectly Stirred Reactor</h1>
<p>Reference: G. B. Skinner and G. H. Ringrose, “Ignition Delays of a Hydrogen—Oxygen—Argon Mixture at Relatively Low Temperatures”, J. Chem. Phys., vol. 42, no. 6, pp. 2190–2192, Mar. 1965. Accessed: Oct. 13, 2024. [Online]. Available: <a href="https://doi.org/10.1063/1.1696266">https://doi.org/10.1063/1.1696266</a>.</p>
<div class="fragment"><div class="line">$ python3 analyze.py</div>
<div class="line">Induction Times ([OH] &gt;= 1e-6):</div>
<div class="line"> + Skinner et al.: 5.200e-05 s</div>
<div class="line"> + Cantera:        5.130e-05 s</div>
<div class="line"> + (Che)MFC:       5.130e-05 s</div>
</div><!-- fragment --><p><img src="result-nD_perfect_reactor-example.png" alt="" class="inline" title="Result"/>    </p>
<h1><a class="anchor" id="autotoc_md39"></a>
Titarev-Toro problem (1D)</h1>
<p>Reference: V. A. Titarev, E. F. Toro, Finite-volume WENO schemes for three-dimensional conservation laws, Journal of Computational Physics 201 (1) (2004) 238–260.</p>
<h2><a class="anchor" id="autotoc_md40"></a>
Initial Condition</h2>
<div class="image">
<img src="initial-1D_titarevtorro-example.png" alt=""/>
<div class="caption">
Initial Condition</div></div>
    <h2><a class="anchor" id="autotoc_md41"></a>
Result</h2>
<div class="image">
<img src="result-1D_titarevtorro-example.png" alt=""/>
<div class="caption">
Result</div></div>
    <h1><a class="anchor" id="autotoc_md42"></a>
2D IBM CFL dt (2D)</h1>
<h2><a class="anchor" id="autotoc_md43"></a>
Result</h2>
<div class="image">
<img src="result-2D_ibm_cfl_dt-example.png" alt=""/>
<div class="caption">
Result</div></div>
    <h1><a class="anchor" id="autotoc_md44"></a>
Shu-Osher problem (1D)</h1>
<p>Reference: C. W. Shu, S. Osher, Efficient implementation of essentially non-oscillatory shock-capturing schemes, Journal of Computational Physics 77 (2) (1988) 439–471. doi:10.1016/0021-9991(88)90177-5.</p>
<h2><a class="anchor" id="autotoc_md45"></a>
Initial Condition</h2>
<div class="image">
<img src="initial-1D_shuosher_old-example.png" alt=""/>
<div class="caption">
Initial Condition</div></div>
    <h2><a class="anchor" id="autotoc_md46"></a>
Result</h2>
<div class="image">
<img src="result-1D_shuosher_old-example.png" alt=""/>
<div class="caption">
Result</div></div>
    <h1><a class="anchor" id="autotoc_md47"></a>
2D Hardcodied IC Example</h1>
<h2><a class="anchor" id="autotoc_md48"></a>
Initial Condition</h2>
<div class="image">
<img src="initial-2D_hardcodied_ic-example.png" alt=""/>
<div class="caption">
Initial Condition</div></div>
    <h2><a class="anchor" id="autotoc_md49"></a>
Result</h2>
<p><img src="result-2D_hardcodied_ic-example.png" alt="" class="inline" title="Result"/>    </p>
<h1><a class="anchor" id="autotoc_md50"></a>
Lax shock tube problem (1D)</h1>
<p>Reference: P. D. Lax, Weak solutions of nonlinear hyperbolic equations and their numerical computation, Communications on pure and applied mathematics 7 (1) (1954) 159–193.</p>
<h2><a class="anchor" id="autotoc_md51"></a>
Initial Condition</h2>
<div class="image">
<img src="initial-1D_laxshocktube-example.png" alt=""/>
<div class="caption">
Initial Condition</div></div>
    <h2><a class="anchor" id="autotoc_md52"></a>
Result</h2>
<div class="image">
<img src="result-1D_laxshocktube-example.png" alt=""/>
<div class="caption">
Result</div></div>
    <h1><a class="anchor" id="autotoc_md53"></a>
Lid-Driven Cavity Problem (2D)</h1>
<p>Reference: Bezgin, D. A., &amp; Buhendwa A. B., &amp; Adams N. A. (2022). JAX-FLUIDS: A fully-differentiable high-order computational fluid dynamics solver for compressible two-phase flows. arXiv:2203.13760</p>
<p>Reference: Ghia, U., &amp; Ghia, K. N., &amp; Shin, C. T. (1982). High-re solutions for incompressible flow using the Navier-Stokes equations and a multigrid method. Journal of Computational Physics, 48, 387-411</p>
<p>Video: <a href="https://youtube.com/shorts/JEP28scZrBM?feature=share">https://youtube.com/shorts/JEP28scZrBM?feature=share</a></p>
<h2><a class="anchor" id="autotoc_md54"></a>
Final Condition</h2>
<div class="image">
<img src="final_condition-2D_lid_driven_cavity-example.png" alt=""/>
<div class="caption">
Final Condition</div></div>
    <h2><a class="anchor" id="autotoc_md55"></a>
Centerline Velocities</h2>
<div class="image">
<img src="centerline_velocities-2D_lid_driven_cavity-example.png" alt=""/>
<div class="caption">
Centerline Velocities</div></div>
    <h1><a class="anchor" id="autotoc_md56"></a>
1D Multi-Component Inert Shock Tube</h1>
<p>References: </p><blockquote class="doxtable">
<p>&zwj;P. J. Martínez Ferrer, R. Buttay, G. Lehnasch, and A. Mura, “A detailed verification procedure for compressible reactive multicomponent Navier–Stokes solvers”, Comput. &amp; Fluids, vol. 89, pp. 88–110, Jan. 2014. Accessed: Oct. 13, 2024. [Online]. Available: <a href="https://doi.org/10.1016/j.compfluid.2013.10.014">https://doi.org/10.1016/j.compfluid.2013.10.014</a> </p>
</blockquote>
<h2><a class="anchor" id="autotoc_md57"></a>
Initial Condition</h2>
<div class="image">
<img src="initial-1D_inert_shocktube-example.png" alt=""/>
<div class="caption">
Initial Condition</div></div>
    <h2><a class="anchor" id="autotoc_md58"></a>
Results</h2>
<p><img src="result-1D_inert_shocktube-example.png" alt="" class="inline" title="Results"/>    </p>
<h1><a class="anchor" id="autotoc_md59"></a>
Isentropic vortex problem (2D)</h1>
<p>Reference: Coralic, V., &amp; Colonius, T. (2014). Finite-volume Weno scheme for viscous compressible multicomponent flows. Journal of Computational Physics, 274, 95–121. <a href="https://doi.org/10.1016/j.jcp.2014.06.003">https://doi.org/10.1016/j.jcp.2014.06.003</a></p>
<h2><a class="anchor" id="autotoc_md60"></a>
Density</h2>
<div class="image">
<img src="alpha_rho1-2D_isentropicvortex-example.png" alt=""/>
<div class="caption">
Density</div></div>
    <h2><a class="anchor" id="autotoc_md61"></a>
Density Norms</h2>
<div class="image">
<img src="density_norms-2D_isentropicvortex-example.png" alt=""/>
<div class="caption">
Density Norms</div></div>
    <h1><a class="anchor" id="autotoc_md62"></a>
Strong- &amp; Weak-scaling</h1>
<p>The <a href="case.py"><b>Scaling</b></a> case can exercise both weak- and strong-scaling. It adjusts itself depending on the number of requested ranks.</p>
<p>This directory also contains a collection of scripts used to test strong-scaling on OLCF Frontier. They required modifying MFC to collect some metrics but are meant to serve as a reference to users wishing to run similar experiments.</p>
<h2><a class="anchor" id="autotoc_md63"></a>
Weak Scaling</h2>
<p>Pass <code>--scaling weak</code>. The <code>--memory</code> option controls (approximately) how much memory each rank should use, in Gigabytes. The number of cells in each dimension is then adjusted according to the number of requested ranks and an approximation for the relation between cell count and memory usage. The problem size increases linearly with the number of ranks.</p>
<h2><a class="anchor" id="autotoc_md64"></a>
Strong Scaling</h2>
<p>Pass <code>--scaling strong</code>. The <code>--memory</code> option controls (approximately) how much memory should be used in total during simulation, across all ranks, in Gigabytes. The problem size remains constant as the number of ranks increases.</p>
<h2><a class="anchor" id="autotoc_md65"></a>
Example</h2>
<p>For example, to run a weak-scaling test that uses ~4GB of GPU memory per rank on 8 2-rank nodes with case optimization, one could:</p>
<div class="fragment"><div class="line">./mfc.sh run examples/scaling/case.py -t pre_process simulation                    \</div>
<div class="line">             -e batch -p mypartition -N 8 -n 2 -w &quot;01:00:00&quot; -# &quot;MFC Weak Scaling&quot; \</div>
<div class="line">             --case-optimization -j 32 -- --scaling weak --memory 4</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md66"></a>
IBM Bow Shock (3D)</h1>
<h2><a class="anchor" id="autotoc_md67"></a>
Final Condition</h2>
<div class="image">
<img src="result-3D_ibm_bowshock-example.png" alt=""/>
<div class="caption">
Density</div></div>
    <h1><a class="anchor" id="autotoc_md68"></a>
Taylor-Green Vortex (3D)</h1>
<p>Reference: Hillewaert, K. (2013). TestCase C3.5 - DNS of the transition of the Taylor-Green vortex, Re=1600 - Introduction and result summary. 2nd International Workshop on high-order methods for CFD.</p>
<h2><a class="anchor" id="autotoc_md69"></a>
Final Condition</h2>
<p>This figure shows the isosurface with zero q-criterion. <img src="result-3D_TaylorGreenVortex-example.png" alt="" class="inline" title="Density"/>    </p>
<h1><a class="anchor" id="autotoc_md70"></a>
Rayleigh-Taylor Instability (3D)</h1>
<h2><a class="anchor" id="autotoc_md71"></a>
Final Condition</h2>
<div class="image">
<img src="final_condition-3D_rayleigh_taylor-example.png" alt=""/>
<div class="caption">
Final Condition</div></div>
    <h2><a class="anchor" id="autotoc_md72"></a>
Centerline Velocities</h2>
<div class="image">
<img src="linear_theory-3D_rayleigh_taylor-example.png" alt=""/>
<div class="caption">
Linear Theory Comparison</div></div>
    <h1><a class="anchor" id="autotoc_md73"></a>
Rayleigh-Taylor Instability (2D)</h1>
<h2><a class="anchor" id="autotoc_md74"></a>
Final Condition</h2>
<div class="image">
<img src="final_condition-2D_rayleigh_taylor-example.png" alt=""/>
<div class="caption">
Final Condition</div></div>
    <h2><a class="anchor" id="autotoc_md75"></a>
Centerline Velocities</h2>
<p><img src="linear_theory.jpg" alt="Linear Theory Comparison" class="inline"/></p>
<h1><a class="anchor" id="autotoc_md76"></a>
1D Multi-Component Reactive Shock Tube</h1>
<p>References: </p><blockquote class="doxtable">
<p>&zwj;P. J. Martínez Ferrer, R. Buttay, G. Lehnasch, and A. Mura, “A detailed verification procedure for compressible reactive multicomponent Navier–Stokes solvers”, Comput. &amp; Fluids, vol. 89, pp. 88–110, Jan. 2014. Accessed: Oct. 13, 2024. [Online]. Available: <a href="https://doi.org/10.1016/j.compfluid.2013.10.014">https://doi.org/10.1016/j.compfluid.2013.10.014</a> </p>
</blockquote>
<blockquote class="doxtable">
<p>&zwj;H. Chen, C. Si, Y. Wu, H. Hu, and Y. Zhu, “Numerical investigation of the effect of equivalence ratio on the propagation characteristics and performance of rotating detonation engine”, Int. J. Hydrogen Energy, Mar. 2023. Accessed: Oct. 13, 2024. [Online]. Available: <a href="https://doi.org/10.1016/j.ijhydene.2023.03.190">https://doi.org/10.1016/j.ijhydene.2023.03.190</a> </p>
</blockquote>
<h2><a class="anchor" id="autotoc_md77"></a>
Initial Condition</h2>
<div class="image">
<img src="initial-1D_reactive_shocktube-example.png" alt=""/>
<div class="caption">
Initial Condition</div></div>
    <h2><a class="anchor" id="autotoc_md78"></a>
Results</h2>
<div class="image">
<img src="result-1D_reactive_shocktube-example.png" alt=""/>
<div class="caption">
Results</div></div>
     </div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.9.1-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.13.0 </li>
  </ul>
</div>
</body>
</html>
