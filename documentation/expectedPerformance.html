<!-- HTML header for doxygen 1.9.1-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-SY496B9L99"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-SY496B9L99');
</script>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.16.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>MFC: Performance</title>
<meta name=”keywords” content="exascale, fluid dynamics, cfd, computational fluid dynamics, compressible, hpc, bryngelson, colonius, subgrid, multiphase, frontier, summit, el capitan, aurora, amd gpu, gpu, nvidia"/>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js", "TeX/AMSmath.js", "TeX/AMSsymbols.js"],
  jax: ["input/TeX","output/HTML-CSS"],
});
// This file is set as MATHJAX_CODEFILE in the Doxyfile. It configures how
// MathJax renders expressions in Markdown so that it is consistent with GitHub.
MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX", "output/HTML-CSS"],
    tex2jax: {
      inlineMath:  [ ['$',  '$'], ["\\(","\\)"] ],
      displayMath: [ ['$$','$$'], ["\\[","\\]"] ],
      processEscapes: true,
      ignoreClass: "line" // Ignore code blocks: https://web.archive.org/web/20120430100225/http://www.mathjax.org/docs/1.1/options/tex2jax.html
    },
    "HTML-CSS": {
      fonts: ["TeX"]
    }
});
</script>
<script type="text/javascript" async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link rel="shortcut icon" href="icon.ico" type="image/x-icon" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
<link href="custom.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="icon.ico"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">MFC
   </div>
   <div id="projectbrief">High-fidelity multiphase flow simulation</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.16.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search/",'.html');
</script>
<script type="text/javascript">
$(function() { codefold.init(); });
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(function(){initNavTree('expectedPerformance.html','',''); });
</script>
<div id="container">
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Performance </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1 class="doxsection"><a class="anchor" id="autotoc_md229"></a>
Performance</h1>
<p>This page covers how to achieve maximum performance with MFC, including optimization techniques and benchmark results across various hardware platforms.</p>
<hr  />
<h2 class="doxsection"><a class="anchor" id="autotoc_md231"></a>
Achieving Maximum Performance</h2>
<h3 class="doxsection"><a class="anchor" id="autotoc_md232"></a>
Case Optimization (Recommended)</h3>
<p>The single most impactful optimization is <b>case optimization</b>, which can provide <b>up to 10x speedup</b> for both CPU and GPU runs.</p>
<p>Case optimization works by hard-coding your simulation parameters at compile time, enabling aggressive compiler optimizations (loop unrolling, constant propagation, dead code elimination).</p>
<p><b>Basic usage:</b> </p><div class="fragment"><div class="line">./mfc.sh run case.py --case-optimization -j 8</div>
</div><!-- fragment --><p>This automatically:</p><ol type="1">
<li>Generates optimized source code with your parameters hard-coded</li>
<li>Builds an optimized binary for your specific case</li>
<li>Runs the simulation with the optimized binary</li>
<li>Caches the build for repeated runs with the same parameters</li>
</ol>
<p><b>For batch jobs:</b> </p><div class="fragment"><div class="line">./mfc.sh run case.py --case-optimization -j 8 -e batch -N 4 -n 8</div>
</div><!-- fragment --><p><b>Build separately (optional):</b> </p><div class="fragment"><div class="line">./mfc.sh build -i case.py --case-optimization -j 8</div>
<div class="line">./mfc.sh run case.py</div>
</div><!-- fragment --><h4 class="doxsection"><a class="anchor" id="autotoc_md233"></a>
When to use case optimization</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Use Case  </th><th class="markdownTableHeadNone">Recommended?  </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Production simulations  </td><td class="markdownTableBodyNone"><b>Yes</b>  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Large-scale HPC runs  </td><td class="markdownTableBodyNone"><b>Yes</b>  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Benchmarking  </td><td class="markdownTableBodyNone"><b>Yes</b>  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Rapid iteration/debugging  </td><td class="markdownTableBodyNone">No (rebuilds on parameter changes)  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Parameter sweeps  </td><td class="markdownTableBodyNone">No (many different configurations)  </td></tr>
</table>
<h3 class="doxsection"><a class="anchor" id="autotoc_md234"></a>
Other Optimization Flags</h3>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Flag  </th><th class="markdownTableHeadNone">Description  </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><span class="tt">--gpu</span>  </td><td class="markdownTableBodyNone">Enable GPU acceleration  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><span class="tt">-j N</span>  </td><td class="markdownTableBodyNone">Parallel build with N threads  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><span class="tt">--fastmath</span>  </td><td class="markdownTableBodyNone">Faster (less precise) floating-point math  </td></tr>
</table>
<h3 class="doxsection"><a class="anchor" id="autotoc_md235"></a>
Profiling for Optimization</h3>
<p>Use profiling tools to identify bottlenecks:</p>
<p><b>NVIDIA GPUs:</b> </p><div class="fragment"><div class="line">./mfc.sh run case.py --nsys    # Timeline profiling (Nsight Systems)</div>
<div class="line">./mfc.sh run case.py --ncu     # Kernel profiling (Nsight Compute)</div>
</div><!-- fragment --><p><b>AMD GPUs:</b> </p><div class="fragment"><div class="line">./mfc.sh run case.py --rsys    # Timeline profiling (rocprof-systems)</div>
<div class="line">./mfc.sh run case.py --rcu     # Kernel profiling (rocprof-compute)</div>
</div><!-- fragment --><p>See <a class="el" href="running.html" title="Running">Running</a> for detailed profiling instructions.</p>
<h3 class="doxsection"><a class="anchor" id="autotoc_md236"></a>
Performance Checklist</h3>
<p>Before running large simulations:</p>
<ol type="1">
<li><b>Build with optimization:</b> Use <span class="tt">--case-optimization</span> for production runs</li>
<li><b>Use GPU acceleration:</b> Build with <span class="tt">--gpu</span> on GPU systems</li>
<li><b>Match ranks to hardware:</b> One MPI rank per GPU, or match CPU cores</li>
<li><b>Verify GPU usage:</b> Check with <span class="tt">nvidia-smi</span> or <span class="tt">rocm-smi</span> during runs</li>
<li><b>Profile first:</b> Run a short simulation with profiling to identify issues</li>
</ol>
<hr  />
<h2 class="doxsection"><a class="anchor" id="autotoc_md238"></a>
Benchmark Results</h2>
<p>MFC has been benchmarked on several CPUs and GPU devices. This section summarizes these results.</p>
<h3 class="doxsection"><a class="anchor" id="autotoc_md239"></a>
Figure of merit: Grind time performance</h3>
<p>The following table outlines observed performance as nanoseconds per grid point (ns/gp) per equation (eq) per right-hand side (rhs) evaluation (lower is better), also known as the grind time. We solve an example 3D, inviscid, 5-equation model problem with two advected species (8 PDEs) and 8M grid points (158-cubed uniform grid). The numerics are WENO5 finite volume reconstruction and HLLC approximate Riemann solver. This case is located in <span class="tt">examples/3D_performance_test</span>. You can run it via <span class="tt">./mfc.sh run -n &lt;num_processors&gt; -j $(nproc) ./examples/3D_performance_test/case.py -t pre_process simulation --case-optimization</span> for CPU cases right after building MFC, which will build an optimized version of the code for this case then execute it. For benchmarking GPU devices, you will likely want to use <span class="tt">-n &lt;num_gpus&gt;</span> where <span class="tt">&lt;num_gpus&gt;</span> should likely be <span class="tt">1</span>. If the above does not work on your machine, see the rest of this documentation for other ways to use the <span class="tt">./mfc.sh run</span> command.</p>
<p>Results are for MFC v4.9.3 (July 2024 release), though numbers have not changed meaningfully since then. Similar performance is also seen for other problem configurations, such as the Euler equations (4 PDEs). All results are for the compiler that gave the best performance. Note:</p><ul>
<li>CPU results may be performed on CPUs with more cores than reported in the table; we report results for the best performance given the full processor die by checking the performance for different core counts on that device. CPU results are the best performance we achieved using a single socket (or die).</li>
<li>GPU results are for a single GPU device. For single-precision (SP) GPUs, we performed computation in double-precision via conversion in compiler/software; these numbers are <em>not</em> for single-precision computation. AMD MI250X and MI300A GPUs have multiple compute dies per socket; we report results for one <em>GCD</em>* for the MI250X and the entire APU (6 XCDs) for MI300A, though one can quickly estimate full device runtime by dividing the grind time number by the number of GCDs on the device (the MI250X has 2 GCDs). We gratefully acknowledge the permission of LLNL, HPE/Cray, and AMD for permission to release MI300A performance numbers.</li>
</ul>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadRight">Hardware  </th><th class="markdownTableHeadRight">Details  </th><th class="markdownTableHeadRight">Type  </th><th class="markdownTableHeadRight">Usage  </th><th class="markdownTableHeadRight">Grind Time [ns]  </th><th class="markdownTableHeadLeft">Compiler  </th><th class="markdownTableHeadLeft">Computer  </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyRight">NVIDIA GH200  </td><td class="markdownTableBodyRight">GPU only  </td><td class="markdownTableBodyRight">APU  </td><td class="markdownTableBodyRight">1 GPU  </td><td class="markdownTableBodyRight">0.32  </td><td class="markdownTableBodyLeft">NVHPC 24.1  </td><td class="markdownTableBodyLeft">GT Rogues Gallery  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyRight">NVIDIA H100 SXM5  </td><td class="markdownTableBodyRight"></td><td class="markdownTableBodyRight">GPU  </td><td class="markdownTableBodyRight">1 GPU  </td><td class="markdownTableBodyRight">0.38  </td><td class="markdownTableBodyLeft">NVHPC 24.5  </td><td class="markdownTableBodyLeft">GT ICE  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyRight">NVIDIA H100 PCIe  </td><td class="markdownTableBodyRight"></td><td class="markdownTableBodyRight">GPU  </td><td class="markdownTableBodyRight">1 GPU  </td><td class="markdownTableBodyRight">0.45  </td><td class="markdownTableBodyLeft">NVHPC 24.5  </td><td class="markdownTableBodyLeft">GT Rogues Gallery  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyRight">AMD MI300A  </td><td class="markdownTableBodyRight"></td><td class="markdownTableBodyRight">APU  </td><td class="markdownTableBodyRight">1 APU  </td><td class="markdownTableBodyRight">0.60  </td><td class="markdownTableBodyLeft">CCE 18.0.0  </td><td class="markdownTableBodyLeft">LLNL Tioga  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyRight">NVIDIA A100  </td><td class="markdownTableBodyRight"></td><td class="markdownTableBodyRight">GPU  </td><td class="markdownTableBodyRight">1 GPU  </td><td class="markdownTableBodyRight">0.62  </td><td class="markdownTableBodyLeft">NVHPC 22.11  </td><td class="markdownTableBodyLeft">GT Phoenix  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyRight">NVIDIA V100  </td><td class="markdownTableBodyRight"></td><td class="markdownTableBodyRight">GPU  </td><td class="markdownTableBodyRight">1 GPU  </td><td class="markdownTableBodyRight">0.99  </td><td class="markdownTableBodyLeft">NVHPC 22.11  </td><td class="markdownTableBodyLeft">GT Phoenix  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyRight">NVIDIA A30  </td><td class="markdownTableBodyRight"></td><td class="markdownTableBodyRight">GPU  </td><td class="markdownTableBodyRight">1 GPU  </td><td class="markdownTableBodyRight">1.1  </td><td class="markdownTableBodyLeft">NVHPC 24.1  </td><td class="markdownTableBodyLeft">GT Rogues Gallery  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyRight">AMD MI250X  </td><td class="markdownTableBodyRight"></td><td class="markdownTableBodyRight">GPU  </td><td class="markdownTableBodyRight">1 <em>GCD</em>*  </td><td class="markdownTableBodyRight">1.1  </td><td class="markdownTableBodyLeft">CCE 16.0.1  </td><td class="markdownTableBodyLeft">OLCF Frontier  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyRight">AMD EPYC 9965  </td><td class="markdownTableBodyRight">Turin, Zen5c  </td><td class="markdownTableBodyRight">CPU  </td><td class="markdownTableBodyRight">192 cores  </td><td class="markdownTableBodyRight">1.2  </td><td class="markdownTableBodyLeft">AOCC 5.0.0  </td><td class="markdownTableBodyLeft">AMD Volcano  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyRight">AMD MI100  </td><td class="markdownTableBodyRight"></td><td class="markdownTableBodyRight">GPU  </td><td class="markdownTableBodyRight">1 GPU  </td><td class="markdownTableBodyRight">1.4  </td><td class="markdownTableBodyLeft">CCE 16.0.1  </td><td class="markdownTableBodyLeft">Cray internal system  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyRight">AMD EPYC 9755  </td><td class="markdownTableBodyRight">Turin, Zen5  </td><td class="markdownTableBodyRight">CPU  </td><td class="markdownTableBodyRight">128 cores  </td><td class="markdownTableBodyRight">1.4  </td><td class="markdownTableBodyLeft">AOCC 5.0.0  </td><td class="markdownTableBodyLeft">AMD Volcano  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyRight">Intel Xeon 6980P  </td><td class="markdownTableBodyRight">Granite Rapids  </td><td class="markdownTableBodyRight">CPU  </td><td class="markdownTableBodyRight">128 cores  </td><td class="markdownTableBodyRight">1.4  </td><td class="markdownTableBodyLeft">Intel 2024.2  </td><td class="markdownTableBodyLeft">Intel Endeavour  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyRight">NVIDIA L40S  </td><td class="markdownTableBodyRight">FP32-only GPU  </td><td class="markdownTableBodyRight">GPU  </td><td class="markdownTableBodyRight">1 GPU  </td><td class="markdownTableBodyRight">1.7  </td><td class="markdownTableBodyLeft">NVHPC 24.5  </td><td class="markdownTableBodyLeft">GT ICE  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyRight">AMD EPYC 9654  </td><td class="markdownTableBodyRight">Genoa, Zen4  </td><td class="markdownTableBodyRight">CPU  </td><td class="markdownTableBodyRight">96 cores  </td><td class="markdownTableBodyRight">1.7  </td><td class="markdownTableBodyLeft">Intel 2021.9  </td><td class="markdownTableBodyLeft">DOD Carpenter  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyRight">Intel Xeon 6960P  </td><td class="markdownTableBodyRight">Granite Rapids  </td><td class="markdownTableBodyRight">CPU  </td><td class="markdownTableBodyRight">72 cores  </td><td class="markdownTableBodyRight">1.7  </td><td class="markdownTableBodyLeft">Intel 2024.2  </td><td class="markdownTableBodyLeft">Intel AI Cloud  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyRight">NVIDIA P100  </td><td class="markdownTableBodyRight"></td><td class="markdownTableBodyRight">GPU  </td><td class="markdownTableBodyRight">1 GPU  </td><td class="markdownTableBodyRight">2.4  </td><td class="markdownTableBodyLeft">NVHPC 23.5  </td><td class="markdownTableBodyLeft">GT CSE Internal  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyRight">Intel Xeon 8592+  </td><td class="markdownTableBodyRight">Emerald Rapids  </td><td class="markdownTableBodyRight">CPU  </td><td class="markdownTableBodyRight">64 cores  </td><td class="markdownTableBodyRight">2.6  </td><td class="markdownTableBodyLeft">Intel 2024.2  </td><td class="markdownTableBodyLeft">Intel AI Cloud  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyRight">Intel Xeon 6900E  </td><td class="markdownTableBodyRight">Sierra Forest Adv., 2.8GHz Boost, 384 MiB L3  </td><td class="markdownTableBodyRight">CPU  </td><td class="markdownTableBodyRight">192 cores  </td><td class="markdownTableBodyRight">2.6  </td><td class="markdownTableBodyLeft">Intel 2024.2  </td><td class="markdownTableBodyLeft">Intel AI Cloud  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyRight">AMD EPYC 9534  </td><td class="markdownTableBodyRight">Genoa, Zen4  </td><td class="markdownTableBodyRight">CPU  </td><td class="markdownTableBodyRight">64 cores  </td><td class="markdownTableBodyRight">2.7  </td><td class="markdownTableBodyLeft">GNU 12.3.0  </td><td class="markdownTableBodyLeft">GT Phoenix  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyRight">AMD EPYC 9754  </td><td class="markdownTableBodyRight">Bergamo, Zen4c  </td><td class="markdownTableBodyRight">CPU  </td><td class="markdownTableBodyRight">128 cores  </td><td class="markdownTableBodyRight">2.7  </td><td class="markdownTableBodyLeft">GNU 12.3.0  </td><td class="markdownTableBodyLeft">AMD Internal  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyRight">NVIDIA A40  </td><td class="markdownTableBodyRight">FP32-only GPU  </td><td class="markdownTableBodyRight">GPU  </td><td class="markdownTableBodyRight">1 GPU  </td><td class="markdownTableBodyRight">3.3  </td><td class="markdownTableBodyLeft">NVHPC 22.11  </td><td class="markdownTableBodyLeft">NCSA Delta  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyRight">Intel Xeon Max 9468  </td><td class="markdownTableBodyRight">Sapphire Rapids HBM  </td><td class="markdownTableBodyRight">CPU  </td><td class="markdownTableBodyRight">48 cores  </td><td class="markdownTableBodyRight">3.5  </td><td class="markdownTableBodyLeft">NVHPC 24.5  </td><td class="markdownTableBodyLeft">GT Rogues Gallery  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyRight">NVIDIA Grace CPU  </td><td class="markdownTableBodyRight">Arm, Neoverse V2  </td><td class="markdownTableBodyRight">CPU  </td><td class="markdownTableBodyRight">72 cores  </td><td class="markdownTableBodyRight">3.7  </td><td class="markdownTableBodyLeft">NVHPC 24.1  </td><td class="markdownTableBodyLeft">GT Rogues Gallery  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyRight">NVIDIA RTX6000  </td><td class="markdownTableBodyRight">FP32-only GPU  </td><td class="markdownTableBodyRight">GPU  </td><td class="markdownTableBodyRight">1 GPU  </td><td class="markdownTableBodyRight">3.9  </td><td class="markdownTableBodyLeft">NVHPC 22.11  </td><td class="markdownTableBodyLeft">GT Phoenix  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyRight">AMD EPYC 7763  </td><td class="markdownTableBodyRight">Milan, Zen3  </td><td class="markdownTableBodyRight">CPU  </td><td class="markdownTableBodyRight">64 cores  </td><td class="markdownTableBodyRight">4.1  </td><td class="markdownTableBodyLeft">GNU 11.4.0  </td><td class="markdownTableBodyLeft">NCSA Delta  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyRight">Intel Xeon 6740E  </td><td class="markdownTableBodyRight">Sierra Forest  </td><td class="markdownTableBodyRight">CPU  </td><td class="markdownTableBodyRight">92 cores  </td><td class="markdownTableBodyRight">4.2  </td><td class="markdownTableBodyLeft">Intel 2024.2  </td><td class="markdownTableBodyLeft">Intel AI Cloud  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyRight">NVIDIA A10  </td><td class="markdownTableBodyRight">FP32-only GPU  </td><td class="markdownTableBodyRight">GPU  </td><td class="markdownTableBodyRight">1 GPU  </td><td class="markdownTableBodyRight">4.3  </td><td class="markdownTableBodyLeft">NVHPC 24.1  </td><td class="markdownTableBodyLeft">TAMU Faster  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyRight">AMD EPYC 7713  </td><td class="markdownTableBodyRight">Milan, Zen3  </td><td class="markdownTableBodyRight">CPU  </td><td class="markdownTableBodyRight">64 cores  </td><td class="markdownTableBodyRight">5.0  </td><td class="markdownTableBodyLeft">GNU 12.3.0  </td><td class="markdownTableBodyLeft">GT Phoenix  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyRight">Intel Xeon 8480CL  </td><td class="markdownTableBodyRight">Sapphire Rapids  </td><td class="markdownTableBodyRight">CPU  </td><td class="markdownTableBodyRight">56 cores  </td><td class="markdownTableBodyRight">5.0  </td><td class="markdownTableBodyLeft">NVHPC 24.5  </td><td class="markdownTableBodyLeft">GT Phoenix  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyRight">Intel Xeon 6454S  </td><td class="markdownTableBodyRight">Sapphire Rapids  </td><td class="markdownTableBodyRight">CPU  </td><td class="markdownTableBodyRight">32 cores  </td><td class="markdownTableBodyRight">5.6  </td><td class="markdownTableBodyLeft">NVHPC 24.5  </td><td class="markdownTableBodyLeft">GT Rogues Gallery  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyRight">Intel Xeon 8462Y+  </td><td class="markdownTableBodyRight">Sapphire Rapids  </td><td class="markdownTableBodyRight">CPU  </td><td class="markdownTableBodyRight">32 cores  </td><td class="markdownTableBodyRight">6.2  </td><td class="markdownTableBodyLeft">GNU 12.3.0  </td><td class="markdownTableBodyLeft">GT ICE  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyRight">Intel Xeon 6548Y+  </td><td class="markdownTableBodyRight">Emerald Rapids  </td><td class="markdownTableBodyRight">CPU  </td><td class="markdownTableBodyRight">32 cores  </td><td class="markdownTableBodyRight">6.6  </td><td class="markdownTableBodyLeft">Intel 2021.9  </td><td class="markdownTableBodyLeft">GT ICE  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyRight">Intel Xeon 8352Y  </td><td class="markdownTableBodyRight">Ice Lake  </td><td class="markdownTableBodyRight">CPU  </td><td class="markdownTableBodyRight">32 cores  </td><td class="markdownTableBodyRight">6.6  </td><td class="markdownTableBodyLeft">NVHPC 24.5  </td><td class="markdownTableBodyLeft">GT Rogues Gallery  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyRight">Ampere Altra Q80-28  </td><td class="markdownTableBodyRight">Arm, Neoverse-N1  </td><td class="markdownTableBodyRight">CPU  </td><td class="markdownTableBodyRight">80 cores  </td><td class="markdownTableBodyRight">6.8  </td><td class="markdownTableBodyLeft">GNU 12.2.0  </td><td class="markdownTableBodyLeft">OLCF Wombat  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyRight">AMD EPYC 7513  </td><td class="markdownTableBodyRight">Milan, Zen3  </td><td class="markdownTableBodyRight">CPU  </td><td class="markdownTableBodyRight">32 cores  </td><td class="markdownTableBodyRight">7.4  </td><td class="markdownTableBodyLeft">GNU 12.3.0  </td><td class="markdownTableBodyLeft">GT ICE  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyRight">Intel Xeon 8268  </td><td class="markdownTableBodyRight">Cascade Lake  </td><td class="markdownTableBodyRight">CPU  </td><td class="markdownTableBodyRight">24 cores  </td><td class="markdownTableBodyRight">7.5  </td><td class="markdownTableBodyLeft">Intel 2024.2  </td><td class="markdownTableBodyLeft">TAMU ACES  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyRight">AMD EPYC 7452  </td><td class="markdownTableBodyRight">Rome, Zen2  </td><td class="markdownTableBodyRight">CPU  </td><td class="markdownTableBodyRight">32 cores  </td><td class="markdownTableBodyRight">8.4  </td><td class="markdownTableBodyLeft">GNU 12.3.0  </td><td class="markdownTableBodyLeft">GT ICE  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyRight">NVIDIA T4  </td><td class="markdownTableBodyRight">FP32-only GPU  </td><td class="markdownTableBodyRight">GPU  </td><td class="markdownTableBodyRight">1 GPU  </td><td class="markdownTableBodyRight">8.8  </td><td class="markdownTableBodyLeft">NVHPC 24.1  </td><td class="markdownTableBodyLeft">TAMU Faster  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyRight">Intel Xeon 8160  </td><td class="markdownTableBodyRight">Skylake  </td><td class="markdownTableBodyRight">CPU  </td><td class="markdownTableBodyRight">24 cores  </td><td class="markdownTableBodyRight">8.9  </td><td class="markdownTableBodyLeft">Intel 2024.0  </td><td class="markdownTableBodyLeft">TACC Stampede3  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyRight">IBM Power10  </td><td class="markdownTableBodyRight"></td><td class="markdownTableBodyRight">CPU  </td><td class="markdownTableBodyRight">24 cores  </td><td class="markdownTableBodyRight">10  </td><td class="markdownTableBodyLeft">GNU 13.3.1  </td><td class="markdownTableBodyLeft">GT Rogues Gallery  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyRight">AMD EPYC 7401  </td><td class="markdownTableBodyRight">Naples, Zen(1)  </td><td class="markdownTableBodyRight">CPU  </td><td class="markdownTableBodyRight">24 cores  </td><td class="markdownTableBodyRight">10  </td><td class="markdownTableBodyLeft">GNU 10.3.1  </td><td class="markdownTableBodyLeft">LLNL Corona  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyRight">Intel Xeon 6226  </td><td class="markdownTableBodyRight">Cascade Lake  </td><td class="markdownTableBodyRight">CPU  </td><td class="markdownTableBodyRight">12 cores  </td><td class="markdownTableBodyRight">17  </td><td class="markdownTableBodyLeft">GNU 12.3.0  </td><td class="markdownTableBodyLeft">GT ICE  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyRight">Apple M1 Max  </td><td class="markdownTableBodyRight"></td><td class="markdownTableBodyRight">CPU  </td><td class="markdownTableBodyRight">10 cores  </td><td class="markdownTableBodyRight">20  </td><td class="markdownTableBodyLeft">GNU 14.1.0  </td><td class="markdownTableBodyLeft">N/A  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyRight">IBM Power9  </td><td class="markdownTableBodyRight"></td><td class="markdownTableBodyRight">CPU  </td><td class="markdownTableBodyRight">20 cores  </td><td class="markdownTableBodyRight">21  </td><td class="markdownTableBodyLeft">GNU 9.1.0  </td><td class="markdownTableBodyLeft">OLCF Summit  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyRight">Cavium ThunderX2  </td><td class="markdownTableBodyRight">Arm  </td><td class="markdownTableBodyRight">CPU  </td><td class="markdownTableBodyRight">32 cores  </td><td class="markdownTableBodyRight">21  </td><td class="markdownTableBodyLeft">GNU 13.2.0  </td><td class="markdownTableBodyLeft">SBU Ookami  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyRight">Arm Cortex-A78AE  </td><td class="markdownTableBodyRight">Arm, BlueField3  </td><td class="markdownTableBodyRight">CPU  </td><td class="markdownTableBodyRight">16 cores  </td><td class="markdownTableBodyRight">25  </td><td class="markdownTableBodyLeft">NVHPC 24.5  </td><td class="markdownTableBodyLeft">GT Rogues Gallery  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyRight">Intel Xeon E5-2650V4  </td><td class="markdownTableBodyRight">Broadwell  </td><td class="markdownTableBodyRight">CPU  </td><td class="markdownTableBodyRight">12 cores  </td><td class="markdownTableBodyRight">27  </td><td class="markdownTableBodyLeft">NVHPC 23.5  </td><td class="markdownTableBodyLeft">GT CSE Internal  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyRight">Apple M2  </td><td class="markdownTableBodyRight"></td><td class="markdownTableBodyRight">CPU  </td><td class="markdownTableBodyRight">8 cores  </td><td class="markdownTableBodyRight">32  </td><td class="markdownTableBodyLeft">GNU 14.1.0  </td><td class="markdownTableBodyLeft">N/A  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyRight">Intel Xeon E7-4850V3  </td><td class="markdownTableBodyRight">Haswell  </td><td class="markdownTableBodyRight">CPU  </td><td class="markdownTableBodyRight">14 cores  </td><td class="markdownTableBodyRight">34  </td><td class="markdownTableBodyLeft">GNU 9.4.0  </td><td class="markdownTableBodyLeft">GT CSE Internal  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyRight">Fujitsu A64FX  </td><td class="markdownTableBodyRight">Arm  </td><td class="markdownTableBodyRight">CPU  </td><td class="markdownTableBodyRight">48 cores  </td><td class="markdownTableBodyRight">63  </td><td class="markdownTableBodyLeft">GNU 13.2.0  </td><td class="markdownTableBodyLeft">SBU Ookami  </td></tr>
</table>
<p><b>All grind times are in nanoseconds (ns) per grid point (gp) per equation (eq) per right-hand side (rhs) evaluation, so X ns/gp/eq/rhs. Lower is better.</b></p>
<h2 class="doxsection"><a class="anchor" id="autotoc_md240"></a>
Weak scaling</h2>
<p>Weak scaling results are obtained by increasing the problem size with the number of processes so that work per process remains constant.</p>
<h3 class="doxsection"><a class="anchor" id="autotoc_md241"></a>
AMD MI250X GPU</h3>
<p>MFC weask scales to (at least) 65,536 AMD MI250X GPUs on OLCF Frontier with 96% efficiency. This corresponds to 87% of the entire machine.</p>
<p><img src="../res/weakScaling/frontier.svg" alt="" style="height: 50%; width:50%; border-radius: 10pt pointer-events: none;" class="inline"/></p>
<h3 class="doxsection"><a class="anchor" id="autotoc_md242"></a>
NVIDIA V100 GPU</h3>
<p>MFC weak scales to (at least) 13,824 V100 NVIDIA V100 GPUs on OLCF Summit with 97% efficiency. This corresponds to 50% of the entire machine.</p>
<p><img src="../res/weakScaling/summit.svg" alt="" style="height: 50%; width:50%; border-radius: 10pt pointer-events: none;" class="inline"/></p>
<h3 class="doxsection"><a class="anchor" id="autotoc_md243"></a>
IBM Power9 CPU</h3>
<p>MFC Weak scales to 13,824 Power9 CPU cores on OLCF Summit to within 1% of ideal scaling.</p>
<p><img src="../res/weakScaling/cpuScaling.svg" alt="" style="height: 50%; width:50%; border-radius: 10pt pointer-events: none;" class="inline"/></p>
<h2 class="doxsection"><a class="anchor" id="autotoc_md244"></a>
Strong scaling</h2>
<p>Strong scaling results are obtained by keeping the problem size constant and increasing the number of processes so that work per process decreases.</p>
<h3 class="doxsection"><a class="anchor" id="autotoc_md245"></a>
NVIDIA V100 GPU</h3>
<p>The base case utilizes 8 GPUs with one MPI process per GPU for these tests. The performance is analyzed at two problem sizes: 16M and 64M grid points. The "base case" uses 2M and 8M grid points per process.</p>
<h4 class="doxsection"><a class="anchor" id="autotoc_md246"></a>
16M Grid Points</h4>
<p><img src="../res/strongScaling/strongScaling16.svg" alt="" style="width: 50%; border-radius: 10pt pointer-events: none;" class="inline"/></p>
<h4 class="doxsection"><a class="anchor" id="autotoc_md247"></a>
64M Grid Points</h4>
<p><img src="../res/strongScaling/strongScaling64.svg" alt="" style="width: 50%; border-radius: 10pt pointer-events: none;" class="inline"/></p>
<h3 class="doxsection"><a class="anchor" id="autotoc_md248"></a>
IBM Power9 CPU</h3>
<p>CPU strong scaling tests are done with problem sizes of 16, 32, and 64M grid points, with the base case using 2, 4, and 8M cells per process.</p>
<p><img src="../res/strongScaling/cpuStrongScaling.svg" alt="" style="width: 50%; border-radius: 10pt pointer-events: none;" class="inline"/> </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<div id="page-nav" class="page-nav-panel">
<div id="page-nav-resize-handle"></div>
<div id="page-nav-tree">
<div id="page-nav-contents">
</div><!-- page-nav-contents -->
</div><!-- page-nav-tree -->
</div><!-- page-nav -->
</div><!-- container -->
<!-- HTML footer for doxygen 1.9.1-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.16.1 </li>
  </ul>
</div>
</body>
</html>
